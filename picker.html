<!DOCTYPE html>
<html>

<head>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:ital,wght@0,100..700;1,100..700&display=swap" rel="stylesheet">
  <!-- Google Tag Manager -->
  <script>(function (w, d, s, l, i) {
      w[l] = w[l] || []; w[l].push({
        'gtm.start':
          new Date().getTime(), event: 'gtm.js'
      }); var f = d.getElementsByTagName(s)[0],
        j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
          'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', 'GTM-TR9DFPS');</script>
  <!-- End Google Tag Manager -->
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-title" content="huekit">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">

  <meta name="description" content="Colorful HEX code generator designed to be lightweight, fast and easy to use.">
  <meta property="og:title" content="HueKit by Alfarex">
  <meta property="og:image" content="static/images/apple-touch-icon.png">
  <meta property="og:description" content="Colorful HEX generator.">
  <meta property="og:url" content="https://alfaaarex.github.io/picker.html">


  <title>HueKit Picker</title>

  <link rel="canonical" href="https://alfaaarex.github.io/picker.html">

  <link rel="apple-touch-icon-precomposed" sizes="57x57" href="static/images/apple-touch-icon-57.png">
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="static/images/apple-touch-icon-72.png">
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="static/images/apple-touch-icon-114.png">
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="static/images/apple-touch-icon-144.png">

  <link rel="shortcut icon" href="static/images/favicon.png">

  <link rel="stylesheet" type="text/css" href="static/fonts/stylesheet.css">
  <link rel="stylesheet" href="static/css/style.css">

  <style>
    /* Toolbar for palette generation - updated to match site styles */
    .hk-toolbar{
      position:fixed;
      top:12px; right:12px;
      z-index:9999;
      background:transparent;
      border:1px solid rgba(0,0,0,0.12);
      padding:8px;
      border-radius:6px;
      box-shadow:0 6px 18px rgba(0,0,0,0.06);
      font-family:Roboto Mono, monospace;
      color:#222;
      backdrop-filter: blur(4px);
    }
    body.dark .hk-toolbar{ border-color: rgba(255,255,255,0.12); color: #fff }

    .hk-toolbar .label{
      font-size:11px;
      margin-bottom:6px;
      display:block;
      color:inherit;
      font-weight:700;
      text-transform:uppercase;
      letter-spacing:1px;
    }

    /* Collapsible toolbar */
    .hk-toolbar{ overflow:visible; transition: transform .28s cubic-bezier(.2,.9,.2,1), box-shadow .28s ease; }
    .hk-toolbar #hk-toolbar-content{ transition: max-height .36s cubic-bezier(.2,.9,.2,1), opacity .28s ease, transform .28s ease; max-height: 1000px; opacity:1; }
    .hk-toolbar.collapsed{ transform: translateY(-6px); box-shadow: 0 8px 30px rgba(0,0,0,0.08); }
    .hk-toolbar.collapsed #hk-toolbar-content{ max-height:0; opacity:0; transform: scale(.98); overflow:hidden; }
    #hk-toggle-toolbar{ background:transparent; border:1px solid rgba(0,0,0,0.06); cursor:pointer; font-weight:700; }
    .hk-toolbar.collapsed #hk-toggle-toolbar{ transform: rotate(-90deg); }

    .hk-toolbar .btns{ display:flex; gap:6px }
    .hk-toolbar .options{ display:flex; align-items:center; gap:8px; margin-left:8px }

    .hk-toolbar label.toggle{ font-size:12px; display:inline-flex; align-items:center; gap:6px; color:inherit }

    .hk-toolbar button{
      background:transparent;
      border:1px solid currentColor;
      padding:6px 8px;
      border-radius:4px;
      cursor:pointer;
      font-size:13px;
      font-weight:700;
      color:inherit;
    }
    .hk-toolbar button:hover{ background:rgba(0,0,0,0.05) }
    body.dark .hk-toolbar button:hover{ background: rgba(255,255,255,0.06) }

    .hk-toolbar select{ background:transparent; border:1px solid rgba(0,0,0,0.08); padding:4px; border-radius:4px; color:inherit }
    body.dark .hk-toolbar select{ border-color: rgba(255,255,255,0.12) }

    /* Palette area inside #wrap */
    .hk-palette{ display:flex; gap:8px; flex-wrap:wrap; align-items:stretch; margin-top:12px }
    .hk-swatch{
      flex:1 1 80px;
      height:96px;
      border-radius:6px;
      color:#fff;
      display:flex;
      flex-direction:column;
      justify-content:flex-end;
      padding:8px;
      font-weight:700;
      text-shadow:0 1px 0 rgba(0,0,0,0.25);
      cursor:pointer;
      font-family:Roboto Mono, monospace;
      transition:transform .12s ease, box-shadow .12s ease;
    }
    .hk-swatch:hover{ transform: translateY(-3px); box-shadow: 0 8px 22px rgba(0,0,0,0.12) }
    .hk-swatch .hex{ font-size:13px }

    .hk-toast{ position:fixed; left:50%; transform:translateX(-50%); bottom:18px; background:rgba(0,0,0,0.8); color:#fff; padding:8px 12px; border-radius:6px; font-family:Roboto Mono, monospace }

    /* Background split (full-screen) */
    .hk-bg-split{ position:fixed; inset:0; width:100%; height:100%; display:flex; z-index:0 }
    .hk-bg-part{
      flex:1 1 auto;
      position:relative;
      min-width:0;
      display:flex;
      align-items:flex-end;
      justify-content:flex-end;
      padding:14px;
      transition: background-color .45s ease, transform .12s ease, box-shadow .12s ease, opacity .2s ease;
      cursor:pointer;
    }
    .hk-bg-part.hk-flash{ transform: scale(1.01); box-shadow: inset 0 0 0 1000px rgba(255,255,255,0.04); }

    .hk-bg-hex{
      display:inline-block;
      background: rgba(255,255,255,0.18);
      color:#111;
      padding:6px 10px;
      border-radius:8px;
      font-weight:700;
      font-family:Roboto Mono,monospace;
      cursor:pointer;
      border:1px solid rgba(0,0,0,0.06);
      text-shadow:none;
      font-size:13px;
      backdrop-filter: blur(4px);
    }
    body.dark .hk-bg-hex{ background: rgba(0,0,0,0.18); color:#fff; border-color: rgba(255,255,255,0.08) }

    /* keep the main content above the background */
    #wrap{ position:relative; z-index:1 }

    /* centered spacebar prompt */
    #hk-space-prompt{
      position:fixed; left:50%; top:50%; transform:translate(-50%,-50%);
      z-index:0; font-family:Roboto Mono, monospace; font-size:20px; color:rgba(0,0,0,0.12);
      padding:18px 28px; border-radius:10px; background: rgba(255,255,255,0.6); backdrop-filter: blur(6px);
      box-shadow: 0 10px 30px rgba(0,0,0,0.06); transition: opacity .28s ease, transform .3s cubic-bezier(.2,.9,.2,1);
    }
    body.dark #hk-space-prompt{ color: rgba(255,255,255,0.9); background: rgba(0,0,0,0.28); }
  </style>


</head>

<body>
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TR9DFPS" height="0" width="0"
      style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->

  <div id="hk-bg-split" class="hk-bg-split" aria-hidden="true"></div>

  <a class="c" href="https://alfaaarex.github.io/picker.html">HueKit by Alfarex</a>

  <!-- Palette generation toolbar -->
  <div class="hk-toolbar" role="toolbar" aria-label="Palette generator">
    <button id="hk-toggle-toolbar" aria-expanded="true" aria-controls="hk-toolbar-content" title="Toggle toolbar" style="position:absolute;left:8px;top:8px;padding:6px;border-radius:4px;">
      â–¸
    </button>
    <span class="label">Generate palette</span>
    <div id="hk-toolbar-content">
    <div class="btns">
      <button data-count="3">3</button>
      <button data-count="4">4</button>
      <button data-count="5">5</button>
      <button data-count="6">6</button>
      <button data-count="7">7</button>
    </div>
    <div class="options">
      <label class="toggle"><input type="checkbox" name="harmony" id="hk-harmony"> Harmony</label>
      <label style="font-size:12px;margin-left:6px;color:#222">Type
        <select id="hk-harmony-type" style="margin-left:6px;font-size:13px">
          <option value="even">Even</option>
          <option value="complementary">Complementary</option>
          <option value="analogous">Analogous</option>
          <option value="triadic">Triadic</option>
          <option value="tetradic">Tetradic</option>
          <option value="monochrome">Monochrome</option>
        </select>
      </label>
    </div>
    <div class="tools" style="margin-top:8px; display:flex; gap:8px; align-items:center;">
      <label style="font-size:12px;color:inherit">Orientation
        <select id="hk-orientation" style="margin-left:6px;font-size:13px">
          <option value="vertical">Vertical</option>
          <option value="horizontal">Horizontal</option>
        </select>
      </label>
      <button data-action="copy-palette">Copy Palette</button>
      <button data-action="save-palette">Save Palette</button>
      <label style="font-size:12px;color:inherit">Saved
        <select id="hk-saved-list" style="margin-left:6px;font-size:13px"></select>
      </label>
      <button id="hk-delete-saved" title="Delete selected" style="font-size:12px;padding:6px">Delete</button>
    </div>
    </div>
  </div>

  <div id="wrap">
    <h1></h1>
    <div id="hk-space-prompt">Press the spacebar</div>
    <div id="hk-palette" class="hk-palette" aria-live="polite"></div>
  </div>

  <a class="tweet"
    href="https://alfaaarex.github.io/huekit.html">
    <span>Colour Code Tool</span>
  </a>

  <p style="text-align:center; position:absolute; bottom:20px; left:50%; transform: translate(-50%, -50%); width: 100%; "><a
      href="https://alfaaarex.github.io/">About Me</a> | <a href="https://alfaaarex.github.io/eden.html">Project Eden</a> | <a
      href="https://alfaaarex.github.io/titir.html">A cool startpage</a> | <a
      href="https://thecarcinofoundation.org/" target="_blank">The Carcino Foundation</a></p>


  <script src="/static/js/jquery.min.js"></script>
  <script>
    (function () {
      function randomHex() {
        var hex = '#';
        var range = 'ABCDEF0123456789';
        for (var i = 0; i < 6; i++) hex += range.charAt(Math.floor(Math.random() * range.length));
        return hex;
      }

      // Convert hex like #RRGGBB to {r,g,b}
      function hexToRgb(hex) {
        if (!hex) return { r: 0, g: 0, b: 0 };
        var h = hex.replace('#', '');
        if (h.length === 3) h = h.split('').map(function (c) { return c + c; }).join('');
        var bigint = parseInt(h, 16);
        return { r: (bigint >> 16) & 255, g: (bigint >> 8) & 255, b: bigint & 255 };
      }

      // Return either '#000' or '#fff' depending on perceived luminance
      function getContrastColor(hex) {
        var c = hexToRgb(hex);
        // relative luminance
        var r = c.r / 255, g = c.g / 255, b = c.b / 255;
        r = (r <= 0.03928) ? r / 12.92 : Math.pow((r + 0.055) / 1.055, 2.4);
        g = (g <= 0.03928) ? g / 12.92 : Math.pow((g + 0.055) / 1.055, 2.4);
        b = (b <= 0.03928) ? b / 12.92 : Math.pow((b + 0.055) / 1.055, 2.4);
        var lum = 0.2126 * r + 0.7152 * g + 0.0722 * b;
        return lum > 0.55 ? '#111' : '#fff';
      }

      // Render the full-screen background split using an array of color hex strings
      function renderBackground(colors) {
        var bg = document.getElementById('hk-bg-split');
        if (!bg) return;
        bg.innerHTML = '';
        // orientation: vertical (row) or horizontal (column)
        var orient = (window.huekit && window.huekit.orientation) ? window.huekit.orientation : 'vertical';
        bg.style.flexDirection = (orient === 'horizontal') ? 'column' : 'row';
        colors.forEach(function (c, i) {
          var part = document.createElement('div');
          part.className = 'hk-bg-part';
          part.style.background = c;
          part.setAttribute('data-hex', c);

          var hexEl = document.createElement('button');
          hexEl.className = 'hk-bg-hex';
          hexEl.textContent = c;

          // determine readable colors for hex label and its backdrop
          var contrast = getContrastColor(c);
          // choose a semi-opaque backdrop depending on contrast so label remains legible
          if (contrast === '#fff') {
            hexEl.style.background = 'rgba(0,0,0,0.22)';
            hexEl.style.color = '#fff';
            hexEl.style.borderColor = 'rgba(255,255,255,0.06)';
          } else {
            hexEl.style.background = 'rgba(255,255,255,0.22)';
            hexEl.style.color = '#111';
            hexEl.style.borderColor = 'rgba(0,0,0,0.06)';
          }

          // clicking the small hex copies the value (don't let the parent handler re-run twice)
          hexEl.addEventListener('click', function (ev) {
            ev.stopPropagation();
            copyToClipboard(c).then(function () { showToast('Copied ' + c); });
          });

          // clicking the full stripe also copies the value and shows a quick flash
          part.addEventListener('click', function () {
            copyToClipboard(c).then(function () { showToast('Copied ' + c); });
            part.classList.add('hk-flash');
            window.setTimeout(function () { part.classList.remove('hk-flash'); }, 220);
          });

          part.appendChild(hexEl);
          bg.appendChild(part);
        });
      }

      function copyToClipboard(text) {
        if (navigator.clipboard && navigator.clipboard.writeText) return navigator.clipboard.writeText(text);
        var ta = document.createElement('textarea');
        ta.value = text; document.body.appendChild(ta); ta.select(); try { document.execCommand('copy'); } catch (e) { }
        document.body.removeChild(ta);
        return Promise.resolve();
      }

      function showToast(msg, timeout) {
        timeout = timeout || 1400;
        var t = document.createElement('div'); t.className = 'hk-toast'; t.textContent = msg; document.body.appendChild(t);
        setTimeout(function () { t.remove(); }, timeout);
      }

      function renderPalette(colors) {
        var container = document.getElementById('hk-palette');
        container.innerHTML = '';
        colors.forEach(function (c) {
          var sw = document.createElement('div'); sw.className = 'hk-swatch'; sw.style.background = c; sw.title = 'Click to copy ' + c;
          var hexSpan = document.createElement('div'); hexSpan.className = 'hex'; hexSpan.textContent = c;
          sw.appendChild(hexSpan);
          sw.addEventListener('click', function () { copyToClipboard(c).then(function () { showToast('Copied ' + c); }); });
          container.appendChild(sw);
        });
        // also render the full-screen split background
        try { renderBackground(colors); } catch (e) { /* fail silently */ }
      }

      // Convert HSL to RGB (expects h in [0,360], s and l in [0,100])
      function hslToRgb(h, s, l) {
        s /= 100; l /= 100;
        var c = (1 - Math.abs(2 * l - 1)) * s;
        var x = c * (1 - Math.abs((h / 60) % 2 - 1));
        var m = l - c / 2;
        var r1, g1, b1;
        if (h < 60) { r1 = c; g1 = x; b1 = 0; }
        else if (h < 120) { r1 = x; g1 = c; b1 = 0; }
        else if (h < 180) { r1 = 0; g1 = c; b1 = x; }
        else if (h < 240) { r1 = 0; g1 = x; b1 = c; }
        else if (h < 300) { r1 = x; g1 = 0; b1 = c; }
        else { r1 = c; g1 = 0; b1 = x; }
        var r = Math.round((r1 + m) * 255);
        var g = Math.round((g1 + m) * 255);
        var b = Math.round((b1 + m) * 255);
        return { r: r, g: g, b: b };
      }

      function rgbToHex(r, g, b) {
        var toHex = function (v) { var s = v.toString(16); return s.length === 1 ? '0' + s : s; };
        return '#' + toHex(r) + toHex(g) + toHex(b);
      }

      function generateHarmony(n, type) {
        type = type || 'even';
        var baseH = Math.floor(Math.random() * 360);
        var baseS = 60 + Math.floor(Math.random() * 21); // 60-80
        var baseL = 45 + Math.floor(Math.random() * 11); // 45-55
        var colors = [];

        function pushHSL(h, s, l) { var rgb = hslToRgb((h+360)%360, s, l); colors.push(rgbToHex(rgb.r, rgb.g, rgb.b).toUpperCase()); }

        if (type === 'even') {
          for (var i = 0; i < n; i++) {
            var hue = (baseH + Math.round(i * (360 / n))) % 360;
            var s = Math.max(30, Math.min(90, baseS + (Math.floor(Math.random() * 11) - 5)));
            var l = Math.max(25, Math.min(75, baseL + (Math.floor(Math.random() * 11) - 5)));
            pushHSL(hue, s, l);
          }
        } else if (type === 'complementary') {
          // complementary pairs: base and base+180, fill up to n by interpolating
          var pairs = [0, 180];
          for (var i = 0; i < n; i++) {
            var idx = pairs[i % pairs.length] + Math.floor(i / pairs.length) * 10;
            var hue = (baseH + idx) % 360;
            var s = baseS; var l = baseL + ((i%2) ? 5 : -5);
            pushHSL(hue, s, l);
          }
        } else if (type === 'analogous') {
          // spread around base within +/-30 deg
          var span = 30; for (var i = 0; i < n; i++) { var hue = baseH - span + Math.round((i * (span*2) / (n-1 || 1))); var s = baseS; var l = baseL + (Math.floor(Math.random()*11)-5); pushHSL(hue, s, l); }
        } else if (type === 'triadic') {
          var anchors = [0, 120, 240]; for (var i = 0; i < n; i++) { var hue = baseH + anchors[i % anchors.length] + Math.floor(i/anchors.length)*10; pushHSL(hue, baseS, baseL + ((i%2)?6:-6)); }
        } else if (type === 'tetradic') {
          var anchors = [0, 90, 180, 270]; for (var i = 0; i < n; i++) { var hue = baseH + anchors[i % anchors.length] + Math.floor(i/anchors.length)*8; pushHSL(hue, baseS, baseL + ((i%2)?5:-5)); }
        } else if (type === 'monochrome') {
          // same hue, vary lightness
          for (var i = 0; i < n; i++) { var l = Math.max(15, Math.min(85, baseL + Math.round((i - (n-1)/2) * (40 / (n-1 || 1))))); pushHSL(baseH, Math.max(10, baseS - Math.round(Math.abs(i - (n-1)/2) * 6)), l); }
        } else {
          // fallback to even
          return generateHarmony(n, 'even');
        }

        return colors.slice(0, n);
      }

      function generatePalette(n) {
        var harmony = !!document.getElementById('hk-harmony') && document.getElementById('hk-harmony').checked;
        if (harmony) {
          var cols = generateHarmony(n);
          window.huekit.currentPalette = cols.slice();
          renderPalette(cols);
          return;
        }
        var arr = [];
        for (var i = 0; i < n; i++) arr.push(randomHex());
        var up = arr.map(function(c){return c.toUpperCase();});
        window.huekit.currentPalette = up.slice();
        renderPalette(up);
      }

      // ensure global namespace for huekit exists, then bind toolbar count buttons and record last count
      window.huekit = window.huekit || {};
      window.huekit.lastCount = 5;
      document.addEventListener('click', function (ev) {
        // only handle toolbar buttons that specify a data-count attribute
        var btn = ev.target.closest && ev.target.closest('.hk-toolbar button[data-count]');
        if (!btn) return;
        var n = parseInt(btn.getAttribute('data-count'), 10);
        if (!isFinite(n)) n = 5;
        window.huekit.lastCount = n;
        generatePalette(n);
      });

      // spacebar handling: generate a palette using last selected count and harmony toggle
      document.addEventListener('keydown', function (e) {
        var isSpace = (e.code === 'Space') || (e.key === ' ') || (e.keyCode === 32);
        if (!isSpace) return;
        var tag = (e.target && e.target.tagName) || '';
        var isFormElement = /^(INPUT|TEXTAREA|SELECT|BUTTON)$/.test(tag) || (e.target && e.target.isContentEditable);
        if (!isFormElement) {
          // prevent page scroll
          e.preventDefault();
        }
      }, { capture: true });

      document.addEventListener('keyup', function (e) {
        var isSpace = (e.code === 'Space') || (e.key === ' ') || (e.keyCode === 32);
        if (!isSpace) return;
        var tag = (e.target && e.target.tagName) || '';
        var isFormElement = /^(INPUT|TEXTAREA|SELECT|BUTTON)$/.test(tag) || (e.target && e.target.isContentEditable);
        if (isFormElement) return; // ignore when typing
        var n = window.huekit.lastCount || 5;
        // Trigger generation using current harmony settings
        generatePalette(n);
      });

      // expose on window for quick testing in console
      window.huekit = window.huekit || {}; window.huekit.generatePalette = generatePalette;

      // helper: copy whole palette (joined by commas)
      function copyPalette() {
        var cols = (window.huekit && window.huekit.currentPalette) ? window.huekit.currentPalette : [];
        if (!cols || !cols.length) { showToast('No palette to copy'); return; }
        var txt = cols.join(', ');
        copyToClipboard(txt).then(function () { showToast('Palette copied'); });
      }

      // localStorage helpers for saving/loading palettes
      var STORAGE_KEY = 'hk_saved_palettes_v1';
      function loadSavedPalettes() {
        try { var raw = localStorage.getItem(STORAGE_KEY); return raw ? JSON.parse(raw) : []; } catch (e) { return []; }
      }
      function saveSavedPalettes(list) { try { localStorage.setItem(STORAGE_KEY, JSON.stringify(list || [])); } catch (e) { console.warn(e); } }

      function renderSavedList() {
        var select = document.getElementById('hk-saved-list');
        if (!select) return;
        var list = loadSavedPalettes();
        select.innerHTML = '';
        var empty = document.createElement('option'); empty.value=''; empty.textContent = '--'; select.appendChild(empty);
        list.forEach(function (it, idx) {
          var opt = document.createElement('option'); opt.value = String(idx); opt.textContent = it.name + ' (' + it.colors.length + ')'; select.appendChild(opt);
        });
      }

      function saveCurrentPalette() {
        var cols = (window.huekit && window.huekit.currentPalette) ? window.huekit.currentPalette : [];
        if (!cols || !cols.length) { showToast('No palette to save'); return; }
        var name = prompt('Save palette name:');
        if (!name) return;
        var list = loadSavedPalettes();
        // avoid exact duplicate names
        if (list.some(function (x) { return x.name === name; })) name = name + ' (' + (new Date()).toLocaleString() + ')';
        list.push({ name: name, colors: cols, created: Date.now() });
        saveSavedPalettes(list);
        renderSavedList();
        showToast('Saved "' + name + '"');
      }

      function loadSavedByIndex(idx) {
        var list = loadSavedPalettes();
        if (!list || !list[idx]) return;
        var entry = list[idx];
        window.huekit.currentPalette = entry.colors.slice();
        renderPalette(entry.colors);
      }

      function deleteSavedByIndex(idx) {
        var list = loadSavedPalettes();
        if (!list || !list[idx]) return;
        var name = list[idx].name;
        list.splice(idx,1);
        saveSavedPalettes(list);
        renderSavedList();
        showToast('Deleted "' + name + '"');
      }

      // wire up toolbar controls (orientation, copy, save, saved-list)
      function initToolbar() {
        // orientation default
        window.huekit.orientation = window.huekit.orientation || 'vertical';
        var or = document.getElementById('hk-orientation');
        if (or) {
          or.value = window.huekit.orientation;
          or.addEventListener('change', function () { window.huekit.orientation = or.value; if (window.huekit.currentPalette) renderBackground(window.huekit.currentPalette); });
        }

        var copyBtn = document.querySelector('[data-action="copy-palette"]');
        if (copyBtn) copyBtn.addEventListener('click', function(e){ e.stopPropagation(); copyPalette(); });
        var saveBtn = document.querySelector('[data-action="save-palette"]');
        if (saveBtn) saveBtn.addEventListener('click', function(e){ e.stopPropagation(); saveCurrentPalette(); });

        var savedSelect = document.getElementById('hk-saved-list');
        if (savedSelect) { savedSelect.addEventListener('change', function () { var v = savedSelect.value; if (v === '') return; loadSavedByIndex(parseInt(v,10)); }); }
        var delBtn = document.getElementById('hk-delete-saved');
        if (delBtn) { delBtn.addEventListener('click', function (e) { e.stopPropagation(); var s = document.getElementById('hk-saved-list'); if (!s) return; var v = s.value; if (!v) { showToast('No saved palette selected'); return; } deleteSavedByIndex(parseInt(v,10)); }); }

        renderSavedList();
      }

      if (document.readyState === 'loading') document.addEventListener('DOMContentLoaded', initToolbar); else initToolbar();

      // toolbar toggle behavior
      (function(){
        var btn = document.getElementById('hk-toggle-toolbar');
        var toolbar = document.querySelector('.hk-toolbar');
        var content = document.getElementById('hk-toolbar-content');
        if (!btn || !toolbar || !content) return;
        btn.addEventListener('click', function(e){
          e.stopPropagation();
          var collapsed = toolbar.classList.toggle('collapsed');
          btn.setAttribute('aria-expanded', String(!collapsed));
        });
        // also close when clicking outside
        document.addEventListener('click', function(ev){
          if (!toolbar.classList.contains('collapsed')) return;
          // if click is inside toolbar, ignore
          if (ev.target.closest && ev.target.closest('.hk-toolbar')) return;
          // otherwise do nothing
        });
      })();

      // hide or fade the space prompt when palette exists
      function updateSpacePrompt() {
        var p = document.getElementById('hk-space-prompt');
        if (!p) return;
        var has = window.huekit && window.huekit.currentPalette && window.huekit.currentPalette.length;
        if (has) { p.style.opacity = '0'; p.style.transform = 'translate(-50%,-48%) scale(.98)'; p.style.pointerEvents='none'; }
        else { p.style.opacity = '1'; p.style.transform = 'translate(-50%,-50%) scale(1)'; p.style.pointerEvents='auto'; }
      }

      // ensure update when palette changes
      var _origRenderPalette = renderPalette;
      renderPalette = function(colors){ _origRenderPalette(colors); updateSpacePrompt(); };
    })();
  </script>

  <script src="static/js/site.max_v%3D1.2.js" async=""></script>


</body>

</html>